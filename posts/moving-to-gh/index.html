<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Moving to GitHub Pages - Æ Software</title><meta name=Description content="Andreas Eisele, IT Consultant, Software Architect, Software Developer"><meta property="og:title" content="Moving to GitHub Pages"><meta property="og:description" content="Hosting Hugo on GitHub Pages As mentioned in my last blog post my goal was to move this entire homepage to be hosted on github pages.
TL;DR: My ToDo  create blog locally add content setup github pages add github action to auto deploy update DNS zone  Hugo Build The straight forward thing to turn this collection of Markdown and other resources into a proper webpage is to simply have Hugo built it."><meta property="og:type" content="article"><meta property="og:url" content="https://aeisele.github.io/posts/moving-to-gh/"><meta property="og:image" content="https://aeisele.github.io/Octocat-centered-streched.png"><meta property="article:published_time" content="2020-08-05T23:00:12+02:00"><meta property="article:modified_time" content="2020-08-06T01:03:21+02:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://aeisele.github.io/Octocat-centered-streched.png"><meta name=twitter:title content="Moving to GitHub Pages"><meta name=twitter:description content="Hosting Hugo on GitHub Pages As mentioned in my last blog post my goal was to move this entire homepage to be hosted on github pages.
TL;DR: My ToDo  create blog locally add content setup github pages add github action to auto deploy update DNS zone  Hugo Build The straight forward thing to turn this collection of Markdown and other resources into a proper webpage is to simply have Hugo built it."><meta name=application-name content="Æ Software"><meta name=apple-mobile-web-app-title content="Æ Software"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://aeisele.github.io/posts/moving-to-gh/><link rel=prev href=https://aeisele.github.io/posts/blogging-with-hugo/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Moving to GitHub Pages","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/aeisele.github.io\/posts\/moving-to-gh\/"},"image":[{"@type":"ImageObject","url":"https:\/\/aeisele.github.io\/posts\/moving-to-gh\/Octocat-centered-streched.png","width":1600,"height":840}],"genre":"posts","keywords":"blog, hugo, static content, hosting, github","wordcount":790,"url":"https:\/\/aeisele.github.io\/posts\/moving-to-gh\/","datePublished":"2020-08-05T23:00:12+02:00","dateModified":"2020-08-06T01:03:21+02:00","publisher":{"@type":"Organization","name":"Andreas Eisele"},"author":{"@type":"Person","name":"Andreas Eisele"},"description":""}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Æ Software"><span class=header-title-pre><span class=ae-logo>Æ </span><span class=ae-logo-caps>S</span><span class=ae-logo>oftware</span></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value;"><option value=/posts/moving-to-gh/ selected>English</option></select>
</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Æ Software"><span class=header-title-pre><span class=ae-logo>Æ </span><span class=ae-logo-caps>S</span><span class=ae-logo>oftware</span></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class=menu-item title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value;"><option value=/posts/moving-to-gh/ selected>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Moving to GitHub Pages</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Andreas Eisele</a></span>&nbsp;<span class=post-category>included in <a href=/categories/personal/><i class="far fa-folder fa-fw"></i>personal</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-08-05>2020-08-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;790 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/moving-to-gh/Octocat-centered-streched.png data-srcset="/posts/moving-to-gh/Octocat-centered-streched.png, /posts/moving-to-gh/Octocat-centered-streched.png 1.5x, /posts/moving-to-gh/Octocat-centered-streched.png 2x" data-sizes=auto alt=/posts/moving-to-gh/Octocat-centered-streched.png title=/posts/moving-to-gh/Octocat-centered-streched.png></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#hosting-hugo-on-github-pages>Hosting Hugo on GitHub Pages</a><ul><li><a href=#tldr-my-todo>TL;DR: My ToDo</a></li><li><a href=#hugo-build>Hugo Build</a></li><li><a href=#setting-up-github-pages>Setting up GitHub Pages</a></li><li><a href=#deploy-on-push-with-github-actions>Deploy on Push with GitHub Actions</a></li><li><a href=#coming-soon>Coming soon&mldr;</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=hosting-hugo-on-github-pages>Hosting Hugo on GitHub Pages</h2><p>As mentioned in my last <a href=../bloggin-with-hugo rel>blog post</a> my goal was to move this entire homepage to be hosted on <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">github pages</a>.</p><h3 id=tldr-my-todo>TL;DR: My ToDo</h3><ul><li><i class="far fa-check-square fa-fw"></i>create blog locally</li><li><i class="far fa-check-square fa-fw"></i>add content</li><li><i class="far fa-check-square fa-fw"></i>setup github pages</li><li><i class="far fa-check-square fa-fw"></i>add github action to auto deploy</li><li><i class="far fa-square fa-fw"></i>update DNS zone</li></ul><h3 id=hugo-build>Hugo Build</h3><p>The straight forward thing to turn this collection of <em>Markdown</em> and other <em>resources</em> into a proper webpage is to simply
have <em>Hugo</em> built it. The command to achieve this is: <i class="fas fa-terminal"></i>&nbsp;<code>hugo --minify</code>. This will spit out a directory ready to be served
by your trusty old <i class="fas fa-server"></i>&nbsp;<em>httpd</em> of your choice.</p><h3 id=setting-up-github-pages>Setting up GitHub Pages</h3><p>So the next thing was to identify how to tell <i class="fab fa-github"></i>&nbsp;<em>GitHub</em> that I some static stuff hosted and no, it&rsquo;s not <em>Jekyll</em>. It turns
out there are three ways to <em>(trust me I&rsquo;ve used them all)</em>:</p><table><thead><tr><th>Repository Name</th><th>What it does</th></tr></thead><tbody><tr><td>random default repo name</td><td>you can set up github pages but the base url of your page will include the repo name in the path: <code>https:://username.github.io/repoName/</code></td></tr><tr><td>username</td><td>this is a special repository because it can store your personal <code>README.MD</code> that can be used to customize your github profile page. Other than that it follows the same rules as the option above.</td></tr><tr><td>username.github.io</td><td>Yes, the repo must have exactly this format if you want to host in what could be called the <em>root context</em>: <code>https://username.github.io/</code></td></tr></tbody></table><p>Of course people with better reading skills would have figured that out from the <em>GitHub Pages</em> <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">documentation</a> already.</p><p>That&rsquo;s not all there is to do here. One actually needs to tell <em>GitHub</em> which <i class="fas fa-code-branch"></i>&nbsp;branch to use. This
is easy to locate in the actual repository settings.</p><figure><a class=lightgallery href=/posts/moving-to-gh/gh-pages.PNG title=/posts/moving-to-gh/gh-pages.PNG data-thumbnail=/posts/moving-to-gh/gh-pages.PNG data-sub-html="<h2>GitHub Pages repository config</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=gh-pages.PNG data-srcset="/posts/moving-to-gh/gh-pages.PNG, gh-pages.PNG 1.5x, /posts/moving-to-gh/gh-pages.PNG 2x" data-sizes=auto alt=/posts/moving-to-gh/gh-pages.PNG></a><figcaption class=image-caption>GitHub Pages repository config</figcaption></figure><p>Now we only need to create that branch and push it to <em>GitHub</em> and the page should appear. Quick question for <em>Git</em> pros,
how do you creata a new empty branch that doesn&rsquo;t have any ancestors when you already populated your <code>main</code> branch (for
example if somebody comitted the source files for this blog already)? Turns out that thing is called an <em>orphan branch</em>.
This is how it can be done locally for a new branch called <code>gh-pages</code>:</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>git checkout --orphan gh-pages
git reset --hard
git commit --allow-empty -m <span class=s2>&#34;Initializing gh-pages branch&#34;</span>
git push upstream gh-pages
git checkout main
</code></pre></div><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw"></i>Warning<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>If you have git submodules in your working dir the <code>reset --hard</code> might get rid of the checked out files. You may have
to sync your submodules again after switching back to <code>main</code>.</div></div></div><p>This worked liked a charm initally but one problem I faced was with the <em>Hugo</em> <code>baseUrl</code> configuration. Locally in <em>development</em>
mode everything lives on the <em>root context</em> so naturally this is how I crafted my urls in configs and css. But this is
not portable to a deployment under a subcontext (first repository naming option mentioned above). It seems like <em>Hugo</em>
is smart enough to detect that the <em>base url</em> changed to something containing a path but this smartness doesn&rsquo;t apply
automatically in all instances. I also suspect that the <a href=https://hugoloveit.com target=_blank rel="noopener noreffer">theme</a> I&rsquo;m using may have problems with
this kind of setup. So in the end only the last option (hosting on the root context) does really work sufficiently.</p><h3 id=deploy-on-push-with-github-actions>Deploy on Push with GitHub Actions</h3><p><a href=https://github.com/features/actions target=_blank rel="noopener noreffer">GitHub Actions</a> is a really neat <em>newish</em> feature of <em>GitHub</em>. It comes with a
marketplace and it didn&rsquo;t take me long to identify working <a href=https://github.com/marketplace/actions/github-pages-action target=_blank rel="noopener noreffer">recipe</a>
to apply to my repository. So one basically creates a <em>YAML</em> <i class="far fa-file-alt"></i>&nbsp;file through the provided <em>UI</em> and
that&rsquo;s all that is needed to run actions on pushes. <em>Actions</em> even provides the necessary security tokens etc. behind the
covers to enable creating new <em>Git</em> commits automatically.</p><p>Mine at the time of writing looks like this:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>name</span><span class=p>:</span><span class=w> </span>github<span class=w> </span>pages<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>on</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>push</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>branches</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- main<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>jobs</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>deploy</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>runs-on</span><span class=p>:</span><span class=w> </span>ubuntu<span class=m>-18.04</span><span class=w>
</span><span class=w>    </span><span class=k>steps</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>uses</span><span class=p>:</span><span class=w> </span>actions/checkout@v2<span class=w>
</span><span class=w>        </span><span class=k>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=k>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span><span class=w>          </span><span class=k>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Setup<span class=w> </span>Hugo<span class=w>
</span><span class=w>        </span><span class=k>uses</span><span class=p>:</span><span class=w> </span>peaceiris/actions-hugo@v2<span class=w>
</span><span class=w>        </span><span class=k>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=k>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.74.3&#39;</span><span class=w>
</span><span class=w>          </span><span class=k>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Build<span class=w>
</span><span class=w>        </span><span class=k>run</span><span class=p>:</span><span class=w> </span>hugo<span class=w> </span>--minify<span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Deploy<span class=w>
</span><span class=w>        </span><span class=k>uses</span><span class=p>:</span><span class=w> </span>peaceiris/actions-gh-pages@v3<span class=w>
</span><span class=w>        </span><span class=k>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=k>github_token</span><span class=p>:</span><span class=w> </span>${{<span class=w> </span>secrets.GITHUB_TOKEN<span class=w> </span>}}<span class=w>
</span><span class=w>          </span><span class=k>publish_dir</span><span class=p>:</span><span class=w> </span>./public<span class=w>
</span></code></pre></div><p>So this basically checks out each new push to the <code>main</code> branch, takes care that <em>Hugo Extended</em> is available and runs
it to build the static page in the local <code>./public</code> <i class="far fa-folder"></i>&nbsp;directory. This is then taken and put into a new
commit on the <code>gh-pages</code> branch which will in turn lead to an update of the static hosted page.</p><p><em>Et Voila!</em></p><h3 id=coming-soon>Coming soon&mldr;</h3><p><em>&mldr; to a nameserver near you</em></p><p>Yeah so now the next thing to figure out and switch over is my old trusty <em>html</em> based and <em>Apache</em> hosted homepage.
This basically means setting up <em>A</em> and <em>CNAME</em> records to point to <em>GitHub</em> and also configure the <em>GitHub</em> side such
that the <em>vhost</em> / <em>CNAME</em> is recognized.</p><p>Hopefully this will turn this</p><figure><a class=lightgallery href=/posts/moving-to-gh/aedotcom.PNG title=/posts/moving-to-gh/aedotcom.PNG data-thumbnail=/posts/moving-to-gh/aedotcom.PNG data-sub-html="<h2>the old andreaseisele.com</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=aedotcom.PNG data-srcset="/posts/moving-to-gh/aedotcom.PNG, aedotcom.PNG 1.5x, /posts/moving-to-gh/aedotcom.PNG 2x" data-sizes=auto alt=/posts/moving-to-gh/aedotcom.PNG></a><figcaption class=image-caption>the old andreaseisele.com</figcaption></figure><p>into that</p><figure><a class=lightgallery href=/posts/moving-to-gh/aedotcomblog.PNG title=/posts/moving-to-gh/aedotcomblog.PNG data-thumbnail=/posts/moving-to-gh/aedotcomblog.PNG data-sub-html="<h2>the brand new Æ blog</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=aedotcomblog.PNG data-srcset="/posts/moving-to-gh/aedotcomblog.PNG, aedotcomblog.PNG 1.5x, /posts/moving-to-gh/aedotcomblog.PNG 2x" data-sizes=auto alt=/posts/moving-to-gh/aedotcomblog.PNG></a><figcaption class=image-caption>the brand new Æ blog</figcaption></figure><p>very soon.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-08-06</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://aeisele.github.io/posts/moving-to-gh/ data-title="Moving to GitHub Pages" data-via=ae____ data-hashtags="blog,hugo,static content,hosting,github"><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://aeisele.github.io/posts/moving-to-gh/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://aeisele.github.io/posts/moving-to-gh/ data-title="Moving to GitHub Pages"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://aeisele.github.io/posts/moving-to-gh/><i class="fab fa-reddit fa-fw"></i></a><a href=javascript:void(0); title="Share on Xing" data-sharer=xing data-url=https://aeisele.github.io/posts/moving-to-gh/ data-title="Moving to GitHub Pages"><i class="fab fa-xing fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/blog/>blog</a>,&nbsp;<a href=/tags/hugo/>hugo</a>,&nbsp;<a href=/tags/static-content/>static content</a>,&nbsp;<a href=/tags/hosting/>hosting</a>,&nbsp;<a href=/tags/github/>github</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/blogging-with-hugo/ class=prev rel=prev title="Blogging with Hugo"><i class="fas fa-angle-left fa-fw"></i>Blogging with Hugo</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=/legal>Legal</a>&nbsp;|&nbsp;<a href=/gdpr>Privacy</a></div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Andreas Eisele</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>